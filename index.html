<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tutoring Website - English & Math</title>  <link rel="stylesheet" href="assets/css/styles.css">
  <style>
    /* Updated s  <div class="btn-container">
    <a href="pages/courses/english/english-course.html" class="btn" data-i18n="englishCourses">English Language Courses</a>
    <a href="pages/courses/math/math-course.html" class="btn" data-i18n="mathCourses">Math Courses</a>       
    <a href="pages/courses/science/science-course.html" class="btn" data-i18n="scienceCourses">Science Courses</a>
    <a href="pages/courses/german/german-course.html" class="btn" data-i18n="germanCourses">German Language Courses</a>
    <a href="pages/courses/arabic/arabic-course.html" class="btn" data-i18n="arabicCourses">Arabic Language Courses</a>
  </div>or better UI/UX */
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #e0e7ff 0%, #f4f4f4 100%);
      min-height: 100vh;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    body.dark-mode {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    }

    h1 {
      font-size: 3rem;
      color: #1e293b;
      margin-bottom: 20px;
      text-align: center;
    }

    body.dark-mode h1 {
      color: #e2e8f0;
    }

    p {
      font-size: 1.2rem;
      color: #475569;
      text-align: center;
      margin-bottom: 30px;
    }

    body.dark-mode p {
      color: #cbd5e1;
    }

    .btn-container {
      display: flex;
      gap: 20px;
      justify-content: center;
      margin-bottom: 40px;
    }

    .btn {
      font-size: 1.2rem;
      padding: 15px 25px;
      border-radius: 10px;
      background: linear-gradient(90deg, #4f46e5 0%, #3b82f6 100%);
      color: white;
      text-decoration: none;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    body.dark-mode .btn {
      background: linear-gradient(90deg, #6366f1 0%, #3b82f6 100%);
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    }

    /* Enhanced Privacy Notice Modal */
    .privacy-policy-modal {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 90%;
        max-width: 600px;
        background: #ffffff;
        border-radius: 12px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        overflow: hidden;
    }
    .privacy-policy-modal.dark-mode {
        background: #2c2c2c;
        color: #ffffff;
    }
    .privacy-policy-content {
        padding: 20px;
        font-family: 'Segoe UI', Arial, sans-serif;
    }
    .privacy-policy-header {
        background: linear-gradient(90deg, #4caf50, #81c784);
        color: white;
        padding: 15px;
        font-size: 1.5rem;
        text-align: center;
    }
    .privacy-policy-footer {
        display: flex;
        justify-content: space-between;
        padding: 10px 20px;
        background: #f1f1f1;
    }
    .privacy-policy-footer button {
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 1rem;
    }
    .privacy-policy-footer .accept-btn {
        background: #4caf50;
        color: white;
    }
    .privacy-policy-footer .decline-btn {
        background: #f44336;
        color: white;
    }

    /* Welcome Screen Styles */
    .welcome-screen {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        background: linear-gradient(135deg, #f0f9ff, #e0f7fa);
        font-family: 'Segoe UI', Arial, sans-serif;
    }

    body.dark-mode .welcome-screen {
      background: linear-gradient(135deg, #1a1a2e, #16213e);
    }

    .welcome-screen h1 {
        font-size: 3rem;
        color: #2e7d32;
    }

    body.dark-mode .welcome-screen h1 {
      color: #e2e8f0;
    }

    .welcome-screen p {
        font-size: 1.2rem;
        color: #388e3c;
        margin-bottom: 20px;
    }

    body.dark-mode .welcome-screen p {
      color: #cbd5e1;
    }

    .welcome-screen input {
        padding: 10px;
        font-size: 1rem;
        border: 1px solid #ddd;
        border-radius: 6px;
        margin-bottom: 20px;
    }
    .welcome-screen button {
        padding: 12px 20px;
        border: none;
        border-radius: 6px;
        background: #4caf50;
        color: white;
        font-size: 1rem;
        cursor: pointer;
    }

    /* Controls Container Styles */
    .controls-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        max-width: 1200px;
        margin: 20px auto;
        padding: 10px;
    }

    .theme-btn {
        background: none;
        border: none;
        cursor: pointer;
        font-size: 1.5rem;
    }

    .language-selector select {
        padding: 5px;
        font-size: 1rem;
        border-radius: 6px;
        border: 1px solid #ddd;
    }

    body.dark-mode .controls-container select {
      background: #2d3748;
      color: #e2e8f0;
      border-color: #4a5568;
    }
  </style>
</head>
<body>  <audio id="clickSound" src="assets/audio/click.mp3" preload="auto"></audio>

  <!-- Login Overlay -->
  <div class="login-overlay" id="loginOverlay" style="display:none;">
    <form class="login-box" id="loginForm">
      <h2 data-i18n="loginWelcome">Welcome! Please enter your username</h2>
      <input type="text" id="usernameInput" placeholder="Username" autocomplete="off" required />
      <p class="privacy-text">
        We collect basic information to enhance your learning experience, including:
        ‚Ä¢ Your username
        ‚Ä¢ Course progress
        Your data is stored securely and never shared with third parties.
        <span class="privacy-link" onclick="showPrivacyPolicy()">Read our privacy policy</span>
      </p>
      <div class="consent-checkbox">
        <input type="checkbox" id="consentCheckbox" required />
        <label for="consentCheckbox">I agree to the privacy policy and data collection terms</label>
      </div>
      <button type="submit">Login</button>
    </form>
  </div>

  <!-- Enhanced Privacy Policy Modal -->
  <div id="privacyModal" class="privacy-policy-modal">
    <div class="privacy-policy-header">Privacy Policy</div>
    <div class="privacy-policy-content">
        <p>We collect the following information to improve your learning experience:</p>
        <ul>
            <li>Username and learning progress</li>
            <li>Browser and device type (for optimization)</li>
            <li>Course engagement statistics</li>
        </ul>
        <p>How we use your data:</p>
        <ul>
            <li>To track your course progress</li>
            <li>To improve our platform and course content</li>
            <li>To analyze which devices and browsers we should optimize for</li>
        </ul>
        <p>Your data is:</p>
        <ul>
            <li>Stored securely in your browser's local storage</li>
            <li>Never shared with third parties</li>
            <li>Used only for analytics in aggregate form</li>
        </ul>
    </div>
    <div class="privacy-policy-footer">
        <button class="accept-btn" onclick="closePrivacyPolicy()">Accept</button>
        <button class="decline-btn" onclick="closePrivacyPolicy()">Decline</button>
    </div>
  </div>

  <!-- Controls Container -->
  <div class="header-controls">
    <button class="theme-btn" aria-label="Toggle Theme">
      <span class="light-icon">‚òÄÔ∏è</span>
      <span class="dark-icon">üåô</span>
    </button>
    <select id="languageSelect" aria-label="Select Language">
      <option value="en">English</option>
      <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
    </select>
  </div>

  <h1 data-i18n="welcome">Welcome to the Tutoring Website</h1>
  <p data-i18n="helloUser">Hello, <span id="welcomeUser"></span>!</p>
  <p data-i18n="coursesInfo">Courses for English and Math - Beginner, Intermediate, Advanced Levels</p>
  <div class="btn-container">
    <a href="pages/courses/english/english-course.html" class="btn" data-i18n="englishCourses">English Language Courses</a>
    <a href="pages/courses/math/math-course.html" class="btn" data-i18n="mathCourses">Math Courses</a>
    <a href="pages/courses/science/science-course.html" class="btn" data-i18n="scienceCourses">Science Courses</a>
    <a href="pages/courses/german/german-course.html" class="btn" data-i18n="germanCourses">German Language Courses</a>
    <a href="pages/courses/arabic/arabic-course.html" class="btn" data-i18n="arabicCourses">Arabic Language Courses</a>
  </div>

  <div id="courseContainer">
    <!-- Course content will be loaded here -->
  </div>

  <script>
    // Fixing the dark mode toggle functionality
    function toggleTheme() {
      const isDark = document.body.classList.toggle('dark-mode');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    }

    // Ensure the theme button toggles the theme correctly
    document.addEventListener('DOMContentLoaded', function() {
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.body.classList.toggle('dark-mode', savedTheme === 'dark');
    });

    // --- Privacy and consent management ---
    function checkConsent() {
      return localStorage.getItem('user_consent') === 'true';
    }
    function saveConsent() {
      localStorage.setItem('user_consent', 'true');
    }
    function showPrivacyPolicy() {
      document.getElementById('privacyModal').style.display = 'block';
    }
    function closePrivacyPolicy() {
      document.getElementById('privacyModal').style.display = 'none';
    }
    // --- Login logic ---
    function showLogin() {
      document.getElementById('loginOverlay').style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }
    function hideLogin() {
      document.getElementById('loginOverlay').style.display = 'none';
      document.body.style.overflow = '';
    }
    function saveUser(username) {
      localStorage.setItem('tutor_username', username);
    }
    function loadUser() {
      return {
        username: localStorage.getItem('tutor_username')
      };
    }
    function collectAnalytics(username) {
      const analyticsData = JSON.parse(localStorage.getItem('analyticsData') || '{}');
      if (!analyticsData.users) analyticsData.users = {};
      if (!analyticsData.browsers) analyticsData.browsers = {};
      if (!analyticsData.devices) analyticsData.devices = {};
      if (!analyticsData.courses) analyticsData.courses = {
        'English': 0,
        'Mathematics': 0
      };
      if (!analyticsData.users[username]) {
        analyticsData.users[username] = {
          joinDate: new Date().toDateString(),
          courseProgress: {},
          lastActive: new Date().toDateString()
        };
      } else {
        analyticsData.users[username].lastActive = new Date().toDateString();
      }
      const browser = getBrowser();
      analyticsData.browsers[browser] = (analyticsData.browsers[browser] || 0) + 1;
      const device = getDeviceType();
      analyticsData.devices[device] = (analyticsData.devices[device] || 0) + 1;
      localStorage.setItem('analyticsData', JSON.stringify(analyticsData));
    }
    function getBrowser() {
      const ua = navigator.userAgent;
      if (ua.includes('Chrome')) return 'Chrome';
      if (ua.includes('Firefox')) return 'Firefox';
      if (ua.includes('Safari')) return 'Safari';
      if (ua.includes('Edge')) return 'Edge';
      return 'Other';
    }
    function getDeviceType() {
      if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        return 'Mobile';
      }
      if (/iPad|Android|Touch/i.test(navigator.userAgent)) {
        return 'Tablet';
      }
      return 'Desktop';
    }
    // --- Login form handler ---
    document.getElementById('loginForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const username = document.getElementById('usernameInput').value.trim();
      const consentCheckbox = document.getElementById('consentCheckbox');
      if (!consentCheckbox.checked) {
        alert('Please agree to the privacy policy and data collection terms to continue.');
        return;
      }
      if (username) {
        saveConsent();
        saveUser(username);
        collectAnalytics(username);
        hideLogin();
        document.getElementById('welcomeUser').textContent = username;
      }
    });
    // --- Initialization: defer to main.js for theme/language, only handle login overlay here ---
    document.addEventListener('DOMContentLoaded', function() {
      const { username } = loadUser();
      if (username && checkConsent()) {
        hideLogin();
        document.getElementById('welcomeUser').textContent = username;
      } else {
        showLogin();
      }
    });

    document.getElementById('languageSelect').addEventListener('change', function() {
      const selectedLanguage = this.value;
      changeLanguage(selectedLanguage);
    });
  </script>
</body>
</html>