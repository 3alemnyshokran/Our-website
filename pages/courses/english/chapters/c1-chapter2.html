<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English C1 - Chapter 2: Academic Discussion and Critical Analysis</title>
    <link rel="stylesheet" href="../../css/styles.css">
    <style>
        .chapter-container {
            max-width: 800px;
            margin: 30px auto;
            padding: 20px;
        }
        
        .level-badge {
            display: inline-block;
            padding: 5px 15px;
            background: var(--primary-color);
            color: white;
            border-radius: 20px;
            margin-bottom: 20px;
        }

        .content-section {
            margin-bottom: 30px;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 10px;
        }

        .question-container {
            background: var(--card-bg);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            display: none;
        }

        .question-container.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-container.correct {
            border-left: 4px solid #4caf50;
        }

        .question-container.incorrect {
            border-left: 4px solid #f44336;
        }

        .answer-input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .answer-input:focus {
            border-color: #007bff;
            outline: none;
        }

        .answer-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .answer-option {
            padding: 12px;
            background: #f5f5f5;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .answer-option:hover {
            background: #e9e9e9;
        }

        .answer-option.selected {
            background: #cce5ff;
            border-color: #007bff;
        }

        .check-answer-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 15px;
            transition: background 0.2s ease;
        }

        .check-answer-btn:hover {
            background: #0069d9;
        }

        .answer-result {
            margin-top: 15px;
            padding: 12px;
            border-radius: 8px;
            display: none;
        }

        .answer-result.correct {
            display: block;
            background: #e8f5e9;
            color: #2e7d32;
            border-left: 4px solid #4caf50;
        }

        .answer-result.incorrect {
            display: block;
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #f44336;
        }

        .progress-container {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            gap: 10px;
        }

        .progress-bar {
            flex-grow: 1;
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #4caf50;
            width: 0%;
            transition: width 0.3s ease;
        }

        .streak-counter {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
            font-weight: bold;
            color: #ff9800;
        }

        .streak-icon {
            font-size: 1.5rem;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .nav-button {
            padding: 10px 20px;
            background: #f0f0f0;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .nav-button:hover:not(:disabled) {
            background: #e0e0e0;
        }

        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<body data-course-id="english-c1">
    <header>
        <h1>English C1 - Chapter 2: Academic Discussion and Critical Analysis</h1>
    </header>

    <main class="chapter-container">
        <div class="level-badge">C1 - Advanced</div>

        <div class="content-section">
            <h2>Academic Discussion and Critical Analysis</h2>
            <p>At the C1 level, learners can understand a wide range of demanding, longer texts, and recognize implicit meaning. They can express ideas fluently and spontaneously without much obvious searching for expressions. Additionally, they can use language flexibly and effectively for social, academic, and professional purposes.</p>
            
            <h3>Key Topics at C1 Level</h3>
            <ul>
                <li><strong>Success and Team Building</strong> - Discuss in detail issues related to building a motivated, successful team.</li>
                <li><strong>Arts and Architecture</strong> - Talk in some detail about favorite paintings and the architecture of buildings.</li>
                <li><strong>Environment and Sustainability</strong> - Participate in discussions about conservation, sustainability, and habitat protection.</li>
                <li><strong>Ethics and Civil Society</strong> - Understand and discuss issues related to ethics, like civil disobedience.</li>
            </ul>
        </div>

        <div class="progress-container">
            <span>Progress:</span>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text">
                <span id="currentQuestion">1</span>/<span id="totalQuestions">25</span>
            </div>
        </div>

        <div class="streak-counter">
            <span class="streak-icon">ðŸ”¥</span>
            Streak: <span id="currentStreak">0</span>
        </div>

        <div id="questionsContainer">
            <!-- Questions will be dynamically inserted here -->
        </div>

        <div class="navigation-buttons">
            <button class="nav-button" id="prevButton" disabled>Previous</button>
            <button class="nav-button" id="nextButton" disabled>Next</button>
        </div>
    </main>

    <script>
        // Question data
        const questions = [
            {
                id: 1,
                type: 'multipleChoice',
                question: "Which of the following is a characteristic of effective academic discussion?",
                options: [
                    "Using casual, conversational language",
                    "Providing evidence to support claims",
                    "Stating personal opinions without explanation",
                    "Avoiding all references to other sources"
                ],
                correctAnswer: 1,
                explanation: "In academic discussions, it's important to provide evidence to support claims rather than just stating opinions. This demonstrates critical thinking and analytical skills."
            },
            {
                id: 2,
                type: 'multipleChoice',
                question: "What is the primary purpose of critical analysis in academic writing?",
                options: [
                    "To criticize the work of others",
                    "To evaluate the strengths and limitations of information or arguments",
                    "To demonstrate superior knowledge",
                    "To summarize existing research"
                ],
                correctAnswer: 1,
                explanation: "Critical analysis involves evaluating the strengths and limitations of information or arguments, not simply criticizing or summarizing."
            },
            {
                id: 3,
                type: 'fillInBlank',
                question: "Complete the sentence with an appropriate academic phrase: 'The research findings _____ the hypothesis that economic growth is correlated with increased energy consumption.'",
                correctAnswer: "substantiate",
                explanation: "Academic writing often uses precise verbs like 'substantiate' (other possibilities include 'corroborate', 'support', or 'validate') rather than more general terms like 'prove' or 'show'."
            },
            {
                id: 4,
                type: 'multipleChoice',
                question: "Which of these transition phrases is most appropriate for introducing a contrasting viewpoint in an academic discussion?",
                options: [
                    "But...",
                    "However, it should be acknowledged that...",
                    "I don't agree with that because...",
                    "That's wrong because..."
                ],
                correctAnswer: 1,
                explanation: "The phrase 'However, it should be acknowledged that...' is formal and measured, appropriate for introducing an opposing viewpoint in academic contexts."
            },
            {
                id: 5,
                type: 'transformation',
                question: "Transform this informal statement into academic language: 'This theory doesn't work because it ignores lots of important factors.'",
                correctAnswer: "This theoretical framework presents limitations as it fails to account for multiple significant variables.",
                explanation: "Academic language is more precise, formal, and nuanced. It uses specific terminology ('theoretical framework', 'variables') and avoids informal expressions like 'doesn't work' or 'lots of'."
            },
            {
                id: 6,
                type: 'multipleChoice',
                question: "Which statement best exemplifies ethical reasoning in a discussion about civil disobedience?",
                options: [
                    "Civil disobedience is illegal and therefore always wrong.",
                    "If everyone broke the law whenever they disagreed with it, society would collapse.",
                    "Civil disobedience has been proven effective historically.",
                    "One must weigh the moral imperative to resist unjust laws against the obligation to respect legal systems that maintain social order."
                ],
                correctAnswer: 3,
                explanation: "Ethical reasoning involves considering competing values and principles rather than making absolute judgments. The selected answer demonstrates this nuanced approach."
            },
            {
                id: 7,
                type: 'fillInBlank',
                question: "Complete the academic phrase: 'The author _____ a compelling argument for renewable energy, albeit with some noteworthy caveats.'",
                correctAnswer: "presents",
                explanation: "In academic writing, neutral verbs like 'presents', 'proposes', 'advances', or 'puts forward' are commonly used to describe arguments."
            },
            {
                id: 8,
                type: 'multipleChoice',
                question: "When analyzing architectural styles, which approach demonstrates the highest level of critical analysis?",
                options: [
                    "Describing which styles look the best",
                    "Evaluating architectural elements based solely on personal preference",
                    "Examining how architectural designs reflect cultural values and historical contexts",
                    "Listing the famous buildings in each style"
                ],
                correctAnswer: 2,
                explanation: "Critical analysis goes beyond description or personal preference to examine deeper connections, such as how designs reflect cultural values and historical contexts."
            },
            {
                id: 9,
                type: 'transformation',
                question: "Transform this casual statement into formal academic language suitable for a sustainability discussion: 'Companies need to go green or else we're all in big trouble.'",
                correctAnswer: "Corporations must adopt environmentally sustainable practices to mitigate the impending ecological crisis.",
                explanation: "Academic language uses precise terminology ('adopt environmentally sustainable practices', 'mitigate', 'ecological crisis') instead of colloquial expressions like 'go green' or 'big trouble'."
            },
            {
                id: 10,
                type: 'multipleChoice',
                question: "Which of these is NOT a characteristic of effective team building according to organizational psychology?",
                options: [
                    "Clear communication of goals and expectations",
                    "Establishing a hierarchical structure where top performers make all decisions",
                    "Creating an environment of psychological safety",
                    "Recognizing and utilizing diverse strengths among team members"
                ],
                correctAnswer: 1,
                explanation: "While some hierarchy may be necessary, modern organizational psychology emphasizes collaborative decision-making rather than concentrating all decisions with top performers."
            },
            {
                id: 11,
                type: 'fillInBlank',
                question: "Complete this academic sentence about art criticism: 'The painting's composition reveals a _____ approach to perspective, challenging conventional Renaissance techniques.'",
                correctAnswer: "nuanced",
                explanation: "Academic analysis of art often uses precise descriptive terms like 'nuanced', 'innovative', 'distinctive', or 'sophisticated' to characterize artistic approaches."
            },
            {
                id: 12,
                type: 'multipleChoice',
                question: "Which statement best demonstrates critical engagement with habitat conservation issues?",
                options: [
                    "All development projects should be stopped to protect wildlife.",
                    "Economic growth is more important than protecting animal habitats.",
                    "Conservationists are hindering human progress.",
                    "Effective habitat conservation requires balancing ecological imperatives with socioeconomic factors through evidence-based policy approaches."
                ],
                correctAnswer: 3,
                explanation: "Critical engagement involves recognizing complexity and considering multiple factors rather than taking an absolute position. The correct answer acknowledges both ecological and socioeconomic considerations."
            },
            {
                id: 13,
                type: 'transformation',
                question: "Transform this claim into one suitable for academic writing by adding appropriate hedging language: 'This policy will solve the housing crisis.'",
                correctAnswer: "This policy may contribute significantly to addressing the housing crisis, though additional measures will likely be necessary.",
                explanation: "Academic writing often uses hedging language ('may', 'likely', 'contribute to') to avoid overstating claims and to acknowledge limitations or uncertainties."
            },
            {
                id: 14,
                type: 'multipleChoice',
                question: "When discussing ethical dilemmas in a professional context, which approach is most appropriate?",
                options: [
                    "Stating your personal opinion and defending it vigorously",
                    "Presenting your cultural or religious beliefs as the definitive answer",
                    "Examining multiple ethical frameworks and their applications to the situation",
                    "Deferring to whatever the law says on the matter"
                ],
                correctAnswer: 2,
                explanation: "Advanced ethical discussion involves considering multiple ethical frameworks (e.g., utilitarian, deontological, virtue ethics) rather than relying solely on personal opinion, cultural norms, or legal standards."
            },
            {
                id: 15,
                type: 'fillInBlank',
                question: "Complete this academic sentence with an appropriate transition word: 'Solar energy offers numerous environmental benefits; _____, its implementation faces significant technological and economic challenges.'",
                correctAnswer: "nevertheless",
                explanation: "Advanced academic writing uses sophisticated transition words like 'nevertheless', 'nonetheless', 'however', or 'conversely' to indicate contrast."
            },
            {
                id: 16,
                type: 'multipleChoice',
                question: "Which approach to analyzing a painting demonstrates the highest level of critical thinking?",
                options: [
                    "Describing what the painting looks like in detail",
                    "Explaining why you like or dislike the painting",
                    "Interpreting the painting's symbolism, techniques, and historical context",
                    "Comparing the painting to others by the same artist"
                ],
                correctAnswer: 2,
                explanation: "Critical analysis of art goes beyond description, personal preference, or simple comparison to interpret meaning, technique, and context."
            },
            {
                id: 17,
                type: 'transformation',
                question: "Transform this personal opinion into an academically appropriate claim: 'I think urban planning is really important for making cities better places to live.'",
                correctAnswer: "Research suggests that comprehensive urban planning strategies significantly impact quality of life indicators in metropolitan areas.",
                explanation: "Academic claims replace personal statements ('I think') with references to evidence ('Research suggests') and use precise terminology ('comprehensive urban planning strategies', 'quality of life indicators', 'metropolitan areas')."
            },
            {
                id: 18,
                type: 'multipleChoice',
                question: "Which of these questions would stimulate the most productive academic discussion about environmental sustainability?",
                options: [
                    "Should companies be punished for polluting?",
                    "Is climate change real or exaggerated?",
                    "What economic incentives could most effectively promote corporate adoption of sustainable practices?",
                    "Why don't people care more about the environment?"
                ],
                correctAnswer: 2,
                explanation: "The most productive academic questions avoid binary thinking or loaded assumptions and instead focus on specific, nuanced aspects that can be analyzed from multiple perspectives."
            },
            {
                id: 19,
                type: 'fillInBlank',
                question: "Complete this academic sentence about architectural analysis: 'The building's faÃ§ade _____ elements of both Baroque and Neoclassical styles, creating a distinctive architectural identity.'",
                correctAnswer: "incorporates",
                explanation: "Academic analysis uses precise verbs like 'incorporates', 'integrates', 'synthesizes', or 'combines' to describe how different elements come together in design."
            },
            {
                id: 20,
                type: 'multipleChoice',
                question: "What is the most academically sound approach to discussing civil disobedience in a democratic society?",
                options: [
                    "Arguing that all laws must be followed regardless of their content",
                    "Claiming that individual conscience should always override legal obligations",
                    "Examining the tension between legal authority and moral imperatives through historical and theoretical lenses",
                    "Focusing exclusively on famous examples like Gandhi and Martin Luther King Jr."
                ],
                correctAnswer: 2,
                explanation: "Academic approaches to complex topics like civil disobedience examine fundamental tensions and draw on both theoretical frameworks and historical evidence rather than taking absolute positions."
            },
            {
                id: 21,
                type: 'transformation',
                question: "Transform this conversational statement into academic language: 'Team building activities are great because they help people work better together.'",
                correctAnswer: "Team cohesion exercises facilitate enhanced collaboration and interpersonal dynamics among team members, potentially leading to improved organizational outcomes.",
                explanation: "Academic language uses precise terminology ('team cohesion exercises', 'facilitate', 'enhanced collaboration', 'interpersonal dynamics') and acknowledges relationships between factors rather than making simple statements."
            },
            {
                id: 22,
                type: 'multipleChoice',
                question: "Which of these statements about critical analysis is most accurate?",
                options: [
                    "Critical analysis means finding all the problems with something.",
                    "Critical analysis should focus primarily on challenging established theories.",
                    "Critical analysis involves systematic evaluation of both strengths and limitations, considering multiple perspectives and evidence.",
                    "Critical analysis should lead to definitive conclusions about whether something is good or bad."
                ],
                correctAnswer: 2,
                explanation: "True critical analysis is balanced, systematic, and considers multiple perspectives rather than simply criticizing or making binary judgments."
            },
            {
                id: 23,
                type: 'fillInBlank',
                question: "Complete this academic sentence: 'The empirical evidence _____ a correlation between educational attainment and income levels, though causation remains difficult to establish definitively.'",
                correctAnswer: "indicates",
                explanation: "Academic writing uses measured verbs like 'indicates', 'suggests', 'demonstrates', or 'reveals' when discussing evidence, particularly when causal relationships are uncertain."
            },
            {
                id: 24,
                type: 'multipleChoice',
                question: "Which approach best demonstrates critical thinking in a discussion about sustainable development?",
                options: [
                    "Advocating for complete cessation of all environmentally harmful activities",
                    "Dismissing environmental concerns as obstacles to economic growth",
                    "Examining trade-offs between environmental protection and economic development through multiple theoretical frameworks",
                    "Focusing exclusively on technological solutions to environmental problems"
                ],
                correctAnswer: 2,
                explanation: "Critical thinking about complex issues like sustainable development involves recognizing trade-offs and examining issues through multiple theoretical frameworks rather than taking extreme positions or focusing on a single approach."
            },
            {
                id: 25,
                type: 'transformation',
                question: "Transform this simple statement into one that demonstrates advanced academic discourse: 'Art reflects society.'",
                correctAnswer: "Artistic expression functions as a complex prism through which sociocultural values, political dynamics, and historical contexts are refracted and reimagined.",
                explanation: "Advanced academic discourse goes beyond simple statements to explore complex relationships using sophisticated vocabulary and conceptual frameworks. The transformation expands the basic concept into a more nuanced understanding of how art relates to society."
            }
        ];

        // Initialize variables
        let currentQuestionIndex = 0;
        let streak = 0;
        let answeredQuestions = new Array(questions.length).fill(false);

        // DOM elements
        const questionsContainer = document.getElementById('questionsContainer');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const currentQuestionElement = document.getElementById('currentQuestion');
        const totalQuestionsElement = document.getElementById('totalQuestions');
        const currentStreakElement = document.getElementById('currentStreak');
        const progressFill = document.getElementById('progressFill');

        // Set total questions
        totalQuestionsElement.textContent = questions.length;

        // Create question elements
        function createQuestionElements() {
            questions.forEach((question, index) => {
                const questionElement = document.createElement('div');
                questionElement.classList.add('question-container');
                questionElement.id = `question-${index}`;
                
                let questionHTML = `<h3>Question ${index + 1}</h3><p>${question.question}</p>`;
                
                if (question.type === 'multipleChoice') {
                    questionHTML += `<div class="answer-options">`;
                    question.options.forEach((option, optIndex) => {
                        questionHTML += `
                            <div class="answer-option" data-index="${optIndex}">
                                ${option}
                            </div>
                        `;
                    });
                    questionHTML += `</div>`;
                } else if (question.type === 'fillInBlank') {
                    questionHTML += `<input type="text" class="answer-input" placeholder="Type your answer">`;
                } else if (question.type === 'trueFalse') {
                    questionHTML += `
                        <div class="answer-options">
                            <div class="answer-option" data-index="true">True</div>
                            <div class="answer-option" data-index="false">False</div>
                        </div>
                    `;
                } else if (question.type === 'transformation') {
                    questionHTML += `<textarea class="answer-input" rows="3" placeholder="Type your answer"></textarea>`;
                }
                
                questionHTML += `
                    <button class="check-answer-btn">Check Answer</button>
                    <div class="answer-result"></div>
                `;
                
                questionElement.innerHTML = questionHTML;
                questionsContainer.appendChild(questionElement);
                
                // Add event listeners
                if (question.type === 'multipleChoice' || question.type === 'trueFalse') {
                    const options = questionElement.querySelectorAll('.answer-option');
                    options.forEach(option => {
                        option.addEventListener('click', () => {
                            options.forEach(opt => opt.classList.remove('selected'));
                            option.classList.add('selected');
                        });
                    });
                }
                
                const checkButton = questionElement.querySelector('.check-answer-btn');
                checkButton.addEventListener('click', () => checkAnswer(index));
            });
            
            // Show first question
            showQuestion(0);
        }

        // Show a specific question
        function showQuestion(index) {
            // Hide all questions
            document.querySelectorAll('.question-container').forEach(el => {
                el.classList.remove('active');
            });
            
            // Show current question
            const currentQuestion = document.getElementById(`question-${index}`);
            currentQuestion.classList.add('active');
            
            // Update current question number
            currentQuestionIndex = index;
            currentQuestionElement.textContent = index + 1;
            
            // Update navigation buttons
            prevButton.disabled = index === 0;
            nextButton.disabled = index === questions.length - 1 || !answeredQuestions[index];
            
            // Update progress bar
            updateProgress();
        }

        // Check answer
        function checkAnswer(index) {
            const question = questions[index];
            const questionElement = document.getElementById(`question-${index}`);
            const resultElement = questionElement.querySelector('.answer-result');
            
            let userAnswer;
            let isCorrect = false;
            
            if (question.type === 'multipleChoice' || question.type === 'trueFalse') {
                const selectedOption = questionElement.querySelector('.answer-option.selected');
                if (!selectedOption) {
                    resultElement.textContent = "Please select an answer.";
                    resultElement.className = "answer-result incorrect";
                    resultElement.style.display = "block";
                    return;
                }
                
                userAnswer = selectedOption.getAttribute('data-index');
                if (question.type === 'trueFalse') {
                    isCorrect = (userAnswer === "true") === question.correctAnswer;
                } else {
                    isCorrect = parseInt(userAnswer) === question.correctAnswer;
                }
            } else {
                const inputElement = questionElement.querySelector('.answer-input');
                userAnswer = inputElement.value.trim().toLowerCase();
                const correctAnswer = question.correctAnswer.toLowerCase();
                
                // For transformation questions, we'll be more lenient
                if (question.type === 'transformation') {
                    // Check if the key parts of the answer are included
                    const keyParts = correctAnswer.split(' ');
                    const essentialWords = keyParts.filter(word => word.length > 3);
                    const matchCount = essentialWords.filter(word => 
                        userAnswer.includes(word.toLowerCase())
                    ).length;
                    
                    isCorrect = matchCount >= Math.ceil(essentialWords.length * 0.7);
                } else if (question.type === 'fillInBlank') {
                    if (correctAnswer === "substantiate") {
                        isCorrect = userAnswer === "substantiate" || userAnswer === "corroborate" || userAnswer === "support" || userAnswer === "validate";
                    } else if (correctAnswer === "presents") {
                        isCorrect = userAnswer === "presents" || userAnswer === "proposes" || userAnswer === "advances" || userAnswer === "offers";
                    } else if (correctAnswer === "nuanced") {
                        isCorrect = userAnswer === "nuanced" || userAnswer === "innovative" || userAnswer === "distinctive" || userAnswer === "sophisticated";
                    } else if (correctAnswer === "nevertheless") {
                        isCorrect = userAnswer === "nevertheless" || userAnswer === "nonetheless" || userAnswer === "however" || userAnswer === "conversely";
                    } else if (correctAnswer === "incorporates") {
                        isCorrect = userAnswer === "incorporates" || userAnswer === "integrates" || userAnswer === "synthesizes" || userAnswer === "combines";
                    } else if (correctAnswer === "indicates") {
                        isCorrect = userAnswer === "indicates" || userAnswer === "suggests" || userAnswer === "demonstrates" || userAnswer === "reveals";
                    } else {
                        isCorrect = userAnswer === correctAnswer;
                    }
                } else {
                    isCorrect = userAnswer === correctAnswer;
                }
            }
            
            // Update UI based on result
            questionElement.classList.remove('correct', 'incorrect');
            questionElement.classList.add(isCorrect ? 'correct' : 'incorrect');
            
            resultElement.textContent = isCorrect ? 
                `Correct! ${question.explanation}` : 
                `Incorrect. The correct answer is: ${question.correctAnswer}. ${question.explanation}`;
            resultElement.className = `answer-result ${isCorrect ? 'correct' : 'incorrect'}`;
            resultElement.style.display = "block";
            
            // Update streak
            if (isCorrect) {
                streak++;
                if (!answeredQuestions[index]) {
                    answeredQuestions[index] = true;
                }
            } else {
                streak = 0;
            }
            currentStreakElement.textContent = streak;
            
            // Enable next button if answer is correct
            nextButton.disabled = index === questions.length - 1 || !answeredQuestions[index];
            
            // Update progress
            updateProgress();
        }

        // Update progress bar
        function updateProgress() {
            const progress = (answeredQuestions.filter(Boolean).length / questions.length) * 100;
            progressFill.style.width = `${progress}%`;
        }

        // Navigation event listeners
        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                showQuestion(currentQuestionIndex - 1);
            }
        });

        nextButton.addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1 && answeredQuestions[currentQuestionIndex]) {
                showQuestion(currentQuestionIndex + 1);
            }
        });

        // Initialize the page
        createQuestionElements();
    </script>
    
    <script src="/assets/js/auth-protection.js"></script>
    <script src="/assets/js/tracking.js"></script>
</body>
</html>
