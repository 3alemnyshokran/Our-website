<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Articles (a/an/the) - A1 Level | Chapter 3</title>
    <link rel="stylesheet" href="/assets/css/styles.css">
    <style>
        .chapter-container {
            max-width: 800px;
            margin: 30px auto;
            padding: 20px;
        }
        
        .level-badge {
            display: inline-block;
            padding: 5px 15px;
            background: var(--primary-color);
            color: white;
            border-radius: 20px;
            margin-bottom: 20px;
        }

        .content-section {
            margin-bottom: 30px;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 10px;
        }

        .question-container {
            background: var(--card-bg);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            display: none;
        }

        .question-container.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-container.correct {
            border-left: 4px solid #4caf50;
        }

        .question-container.incorrect {
            border-left: 4px solid #f44336;
        }

        .answer-input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .answer-input:focus {
            border-color: #007bff;
            outline: none;
        }

        .answer-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .answer-option {
            padding: 12px;
            background: #f5f5f5;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .answer-option:hover {
            background: #e9e9e9;
        }

        .answer-option.selected {
            background: #cce5ff;
            border-color: #007bff;
        }

        .check-answer-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 15px;
            transition: background 0.3s ease;
        }

        .check-answer-btn:hover {
            background: #0069d9;
        }

        .answer-result {
            margin-top: 15px;
            padding: 12px;
            border-radius: 8px;
            font-weight: 500;
            display: none;
        }

        .answer-result.correct {
            display: block;
            background: rgba(76, 175, 80, 0.15);
            color: #2e7d32;
        }

        .answer-result.incorrect {
            display: block;
            background: rgba(244, 67, 54, 0.15);
            color: #d32f2f;
        }

        .streak-counter {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .streak-icon {
            font-size: 1.5rem;
        }

        .progress-container {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .progress-bar {
            flex-grow: 1;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin: 0 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #007bff;
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-text {
            font-size: 0.9rem;
            color: #666;
            min-width: 80px;
            text-align: right;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .nav-button {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .nav-button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body data-course-id="english-a1">
    <header>
        <h1>English A1 - Chapter 3: Articles (a/an/the)</h1>
    </header>

    <main class="chapter-container">
        <div class="level-badge">A1 - Beginner</div>

        <div class="content-section">
            <h2>Articles (a/an/the)</h2>
            <p>Articles are small but important words that appear before nouns. In English, there are two types of articles:</p>
            <ul>
                <li><strong>Indefinite Articles</strong>: "a" and "an" (for non-specific nouns)</li>
                <li><strong>Definite Article</strong>: "the" (for specific nouns)</li>
            </ul>
            <p>Learning when and how to use these articles correctly is essential for clear communication in English.</p>
        </div>

        <div class="progress-container">
            <span>Progress:</span>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text">
                <span id="currentQuestion">1</span>/<span id="totalQuestions">25</span>
            </div>
        </div>

        <div class="streak-counter">
            <span class="streak-icon">ðŸ”¥</span>
            Streak: <span id="currentStreak">0</span>
        </div>

        <div id="questionsContainer">
            <!-- Questions will be dynamically inserted here -->
        </div>

        <div class="navigation-buttons">
            <button class="nav-button" id="prevButton" disabled>Previous</button>
            <button class="nav-button" id="nextButton" disabled>Next</button>
        </div>
    </main>

    <script src="/assets/js/auth-protection.js"></script>
    <script src="/assets/js/tracking.js"></script>
    <script>
        // Question data
        const questions = [
            {
                id: 1,
                type: 'multipleChoice',
                question: "Choose the correct article: 'I have _____ apple.'",
                options: [
                    "a",
                    "an",
                    "the",
                    "no article needed"
                ],
                correctAnswer: 1,
                explanation: "We use 'an' before words that begin with a vowel sound. 'Apple' begins with the vowel sound 'a'."
            },
            {
                id: 2,
                type: 'multipleChoice',
                question: "Choose the correct article: 'She has _____ dog.'",
                options: [
                    "a",
                    "an",
                    "the",
                    "no article needed"
                ],
                correctAnswer: 0,
                explanation: "We use 'a' before words that begin with a consonant sound. 'Dog' begins with the consonant sound 'd'."
            },
            {
                id: 3,
                type: 'multipleChoice',
                question: "Choose the correct article: 'He is _____ university student.'",
                options: [
                    "a",
                    "an",
                    "the",
                    "no article needed"
                ],
                correctAnswer: 0,
                explanation: "We use 'a' before 'university' because although it starts with a vowel letter, it begins with a consonant sound /j/."
            },
            {
                id: 4,
                type: 'multipleChoice',
                question: "Choose the correct article: 'This is _____ hour of my life.'",
                options: [
                    "a",
                    "an",
                    "the",
                    "no article needed"
                ],
                correctAnswer: 1,
                explanation: "We use 'an' before 'hour' because the 'h' is silent, so it begins with a vowel sound."
            },
            {
                id: 5,
                type: 'fillInBlank',
                question: "Complete the sentence: 'I saw _____ cat. _____ cat was black.' (Use appropriate articles)",
                correctAnswer: "a, The",
                explanation: "We use 'a' when we mention something for the first time (non-specific), and 'the' when we refer to it again (now specific)."
            },
            {
                id: 6,
                type: 'multipleChoice',
                question: "Choose the correct article: 'Can you pass me _____ salt, please?'",
                options: [
                    "a",
                    "an",
                    "the",
                    "no article needed"
                ],
                correctAnswer: 2,
                explanation: "We use 'the' with 'salt' in this context because it's specific - the salt that is on the table."
            },
            {
                id: 7,
                type: 'trueFalse',
                question: "The sentence 'I want an banana.' is grammatically correct.",
                correctAnswer: false,
                explanation: "This is incorrect. 'Banana' begins with a consonant sound /b/, so we should use 'a' instead of 'an'.",
                userAnswer: null
            },
            {
                id: 8,
                type: 'multipleChoice',
                question: "Choose the correct article: 'She is _____ honest person.'",
                options: [
                    "a",
                    "an",
                    "the",
                    "no article needed"
                ],
                correctAnswer: 1,
                explanation: "We use 'an' before 'honest' because the 'h' is silent, so it begins with a vowel sound."
            },
            {
                id: 9,
                type: 'fillInBlank',
                question: "Complete the sentence: '_____ sun rises in the east.' (Use appropriate article)",
                correctAnswer: "The",
                explanation: "We use 'the' with 'sun' because it's a unique object - there is only one sun in our solar system."
            },
            {
                id: 10,
                type: 'multipleChoice',
                question: "Choose the correct article: 'I need to buy _____ new shoes.'",
                options: [
                    "a",
                    "an",
                    "the",
                    "no article needed"
                ],
                correctAnswer: 3,
                explanation: "We don't use an article before plural nouns like 'shoes' when talking about them in a general sense."
            },
            {
                id: 11,
                type: 'trueFalse',
                question: "The sentence 'She's an university student.' is grammatically correct.",
                correctAnswer: false,
                explanation: "This is incorrect. 'University' begins with a consonant sound /j/, so we should use 'a' instead of 'an'.",
                userAnswer: null
            },
            {
                id: 12,
                type: 'multipleChoice',
                question: "Choose the correct article: 'I have _____ headache.'",
                options: [
                    "a",
                    "an",
                    "the",
                    "no article needed"
                ],
                correctAnswer: 0,
                explanation: "We use 'a' before 'headache' because it begins with a consonant sound /h/."
            },
            {
                id: 13,
                type: 'fillInBlank',
                question: "Complete the sentence: 'She plays _____ piano very well.' (Use appropriate article)",
                correctAnswer: "the",
                explanation: "We typically use 'the' with musical instruments: 'the piano', 'the guitar', etc."
            },
            {
                id: 14,
                type: 'multipleChoice',
                question: "Choose the correct article: 'My father is _____ engineer.'",
                options: [
                    "a",
                    "an",
                    "the",
                    "no article needed"
                ],
                correctAnswer: 1,
                explanation: "We use 'an' before 'engineer' because it begins with a vowel sound /e/."
            },
            {
                id: 15,
                type: 'trueFalse',
                question: "The sentence 'I saw the movie last night.' is grammatically correct.",
                correctAnswer: true,
                explanation: "This is correct. We use 'the' because we're referring to a specific movie that both the speaker and listener know about."
            },
            {
                id: 16,
                type: 'multipleChoice',
                question: "Choose the correct article: 'She gave me _____ useful advice.'",
                options: [
                    "a",
                    "an",
                    "the",
                    "no article needed"
                ],
                correctAnswer: 0,
                explanation: "We use 'a' before 'useful' because it begins with a consonant sound /j/, even though 'u' is a vowel letter."
            },
            {
                id: 17,
                type: 'fillInBlank',
                question: "Complete the sentence: 'I live in _____ small house near _____ beach.' (Use appropriate articles)",
                correctAnswer: "a, the",
                explanation: "We use 'a' for 'small house' (non-specific) and 'the' for 'beach' (a specific place known to both speaker and listener)."
            },
            {
                id: 18,
                type: 'multipleChoice',
                question: "Choose the correct article: 'Do you have _____ pen I can borrow?'",
                options: [
                    "a",
                    "an",
                    "the",
                    "no article needed"
                ],
                correctAnswer: 0,
                explanation: "We use 'a' because the speaker is asking for any pen, not a specific one. 'Pen' begins with a consonant sound."
            },
            {
                id: 19,
                type: 'trueFalse',
                question: "The sentence 'She's the best student in class.' is grammatically correct.",
                correctAnswer: true,
                explanation: "This is correct. We use 'the' with superlatives like 'best', 'most', etc."
            },
            {
                id: 20,
                type: 'multipleChoice',
                question: "Choose the correct article: 'We had _____ dinner at a restaurant.'",
                options: [
                    "a",
                    "an",
                    "the",
                    "no article needed"
                ],
                correctAnswer: 3,
                explanation: "We typically don't use an article with meals: 'breakfast', 'lunch', 'dinner'."
            },
            {
                id: 21,
                type: 'fillInBlank',
                question: "Complete the sentence: 'He's _____ one-eyed man.' (Use appropriate article)",
                correctAnswer: "a",
                explanation: "We use 'a' before 'one-eyed' because it begins with the consonant sound /w/, even though 'o' is a vowel letter."
            },
            {
                id: 22,
                type: 'multipleChoice',
                question: "Choose the correct article: 'She's studying _____ history.'",
                options: [
                    "a",
                    "an",
                    "the",
                    "no article needed"
                ],
                correctAnswer: 3,
                explanation: "We typically don't use an article with academic subjects: 'history', 'mathematics', 'science'."
            },
            {
                id: 23,
                type: 'trueFalse',
                question: "The sentence 'Can you pass me a sugar?' is grammatically correct.",
                correctAnswer: false,
                explanation: "This is incorrect. 'Sugar' is an uncountable noun, so we either use 'the' or no article. We'd say 'Can you pass me the sugar?' or 'Can you pass me some sugar?'",
                userAnswer: null
            },
            {
                id: 24,
                type: 'multipleChoice',
                question: "Choose the correct article: 'We're going to _____ zoo this weekend.'",
                options: [
                    "a",
                    "an",
                    "the",
                    "no article needed"
                ],
                correctAnswer: 2,
                explanation: "We use 'the' with 'zoo' because it's a specific place that both the speaker and listener know about."
            },
            {
                id: 25,
                type: 'fillInBlank',
                question: "Complete the sentence: 'I have _____ umbrella in my bag.' (Use appropriate article)",
                correctAnswer: "an",
                explanation: "We use 'an' before 'umbrella' because it begins with a vowel sound."
            }
        ];

        // Initialize variables
        let currentQuestionIndex = 0;
        let streak = 0;
        let answeredQuestions = new Array(questions.length).fill(false);

        // DOM elements
        const questionsContainer = document.getElementById('questionsContainer');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const currentQuestionElement = document.getElementById('currentQuestion');
        const totalQuestionsElement = document.getElementById('totalQuestions');
        const currentStreakElement = document.getElementById('currentStreak');
        const progressFill = document.getElementById('progressFill');

        // Set total questions
        totalQuestionsElement.textContent = questions.length;

        // Create question elements
        function createQuestionElements() {
            questions.forEach((question, index) => {
                const questionElement = document.createElement('div');
                questionElement.classList.add('question-container');
                questionElement.id = `question-${index}`;
                
                let questionHTML = `<h3>Question ${index + 1}</h3><p>${question.question}</p>`;
                
                if (question.type === 'multipleChoice') {
                    questionHTML += `<div class="answer-options">`;
                    question.options.forEach((option, optIndex) => {
                        questionHTML += `
                            <div class="answer-option" data-index="${optIndex}">
                                ${option}
                            </div>
                        `;
                    });
                    questionHTML += `</div>`;
                } else if (question.type === 'fillInBlank') {
                    questionHTML += `<input type="text" class="answer-input" placeholder="Type your answer">`;
                } else if (question.type === 'trueFalse') {
                    questionHTML += `
                        <div class="answer-options">
                            <div class="answer-option" data-index="true">True</div>
                            <div class="answer-option" data-index="false">False</div>
                        </div>
                    `;
                } else if (question.type === 'transformation') {
                    questionHTML += `<input type="text" class="answer-input" placeholder="Type your answer">`;
                }
                
                questionHTML += `
                    <button class="check-answer-btn">Check Answer</button>
                    <div class="answer-result"></div>
                `;
                
                questionElement.innerHTML = questionHTML;
                questionsContainer.appendChild(questionElement);
                
                // Add event listeners
                if (question.type === 'multipleChoice' || question.type === 'trueFalse') {
                    const options = questionElement.querySelectorAll('.answer-option');
                    options.forEach(option => {
                        option.addEventListener('click', () => {
                            options.forEach(opt => opt.classList.remove('selected'));
                            option.classList.add('selected');
                        });
                    });
                }
                
                const checkButton = questionElement.querySelector('.check-answer-btn');
                checkButton.addEventListener('click', () => checkAnswer(index));
            });
            
            // Show first question
            showQuestion(0);
        }

        // Show a specific question
        function showQuestion(index) {
            // Hide all questions
            document.querySelectorAll('.question-container').forEach(el => {
                el.classList.remove('active');
            });
            
            // Show current question
            const currentQuestion = document.getElementById(`question-${index}`);
            currentQuestion.classList.add('active');
            
            // Update current question number
            currentQuestionIndex = index;
            currentQuestionElement.textContent = index + 1;
            
            // Update navigation buttons
            prevButton.disabled = index === 0;
            nextButton.disabled = index === questions.length - 1 || !answeredQuestions[index];
            
            // Update progress bar
            updateProgress();
        }

        // Check answer
        function checkAnswer(index) {
            const question = questions[index];
            const questionElement = document.getElementById(`question-${index}`);
            const resultElement = questionElement.querySelector('.answer-result');
            
            let userAnswer;
            let isCorrect = false;
            
            if (question.type === 'multipleChoice' || question.type === 'trueFalse') {
                const selectedOption = questionElement.querySelector('.answer-option.selected');
                if (!selectedOption) {
                    resultElement.textContent = "Please select an answer.";
                    resultElement.className = "answer-result incorrect";
                    return;
                }
                
                userAnswer = selectedOption.getAttribute('data-index');
                if (question.type === 'trueFalse') {
                    isCorrect = (userAnswer === "true") === question.correctAnswer;
                } else {
                    isCorrect = parseInt(userAnswer) === question.correctAnswer;
                }
            } else {
                const inputElement = questionElement.querySelector('.answer-input');
                userAnswer = inputElement.value.trim().toLowerCase();
                const correctAnswer = question.correctAnswer.toLowerCase();
                
                // For fill in the blank, check for exact match or close match
                isCorrect = userAnswer === correctAnswer || 
                            userAnswer.replace(/[.,;:!?]/g, '').replace(/\s+/g, ' ') === 
                            correctAnswer.replace(/[.,;:!?]/g, '').replace(/\s+/g, ' ');
            }
            
            // Update UI based on result
            questionElement.classList.remove('correct', 'incorrect');
            questionElement.classList.add(isCorrect ? 'correct' : 'incorrect');
            
            resultElement.textContent = isCorrect ? 
                `Correct! ${question.explanation}` : 
                `Incorrect. The correct answer is: ${question.correctAnswer}. ${question.explanation}`;
            resultElement.className = `answer-result ${isCorrect ? 'correct' : 'incorrect'}`;
            
            // Update streak
            if (isCorrect) {
                streak++;
                if (!answeredQuestions[index]) {
                    answeredQuestions[index] = true;
                }
            } else {
                streak = 0;
            }
            currentStreakElement.textContent = streak;
            
            // Enable next button if answer is correct
            nextButton.disabled = index === questions.length - 1 || !answeredQuestions[index];
            
            // Update progress
            updateProgress();
        }

        // Update progress bar
        function updateProgress() {
            const progress = (answeredQuestions.filter(Boolean).length / questions.length) * 100;
            progressFill.style.width = `${progress}%`;
        }

        // Navigation event listeners
        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                showQuestion(currentQuestionIndex - 1);
            }
        });

        nextButton.addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1 && answeredQuestions[currentQuestionIndex]) {
                showQuestion(currentQuestionIndex + 1);
            }
        });

        // Initialize the page
        createQuestionElements();
    </script>
</body>
</html>
