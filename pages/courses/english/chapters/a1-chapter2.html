<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Present Tense - A1 Level | Chapter 2</title>
    <link rel="stylesheet" href="../../css/styles.css">
    <style>
        .chapter-container {
            max-width: 800px;
            margin: 30px auto;
            padding: 20px;
        }
        
        .level-badge {
            display: inline-block;
            padding: 5px 15px;
            background: var(--primary-color);
            color: white;
            border-radius: 20px;
            margin-bottom: 20px;
        }

        .content-section {
            margin-bottom: 30px;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 10px;
        }

        .question-container {
            background: var(--card-bg);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            display: none;
        }

        .question-container.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-container.correct {
            border-left: 4px solid #4caf50;
        }

        .question-container.incorrect {
            border-left: 4px solid #f44336;
        }

        .answer-input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .answer-input:focus {
            border-color: #007bff;
            outline: none;
        }

        .answer-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .answer-option {
            padding: 12px;
            background: #f5f5f5;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .answer-option:hover {
            background: #e9e9e9;
        }

        .answer-option.selected {
            background: #cce5ff;
            border-color: #007bff;
        }

        .check-answer-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 15px;
            transition: background 0.3s ease;
        }

        .check-answer-btn:hover {
            background: #0069d9;
        }

        .answer-result {
            margin-top: 15px;
            padding: 12px;
            border-radius: 8px;
            font-weight: 500;
            display: none;
        }

        .answer-result.correct {
            display: block;
            background: rgba(76, 175, 80, 0.15);
            color: #2e7d32;
        }

        .answer-result.incorrect {
            display: block;
            background: rgba(244, 67, 54, 0.15);
            color: #d32f2f;
        }

        .streak-counter {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .streak-icon {
            font-size: 1.5rem;
        }

        .progress-container {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .progress-bar {
            flex-grow: 1;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin: 0 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #007bff;
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-text {
            font-size: 0.9rem;
            color: #666;
            min-width: 80px;
            text-align: right;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .nav-button {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .nav-button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body data-course-id="english-a1">
    <header>
        <h1>English A1 - Chapter 2: Simple Present Tense</h1>
    </header>

    <main class="chapter-container">
        <div class="level-badge">A1 - Beginner</div>

        <div class="content-section">
            <h2>Simple Present Tense</h2>
            <p>The simple present tense is used to describe regular habits, daily routines, general facts, and permanent situations. In this chapter, we'll learn how to form and use the simple present tense correctly.</p>
            
            <h3>How to Form Simple Present Tense</h3>
            <ul>
                <li>I/You/We/They + base form of verb: "I work", "You eat"</li>
                <li>He/She/It + base form of verb + -s or -es: "He works", "She eats"</li>
            </ul>
        </div>

        <div class="progress-container">
            <span>Progress:</span>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text">
                <span id="currentQuestion">1</span>/<span id="totalQuestions">25</span>
            </div>
        </div>

        <div class="streak-counter">
            <span class="streak-icon">ðŸ”¥</span>
            Streak: <span id="currentStreak">0</span>
        </div>

        <div id="questionsContainer">
            <!-- Questions will be dynamically inserted here -->
        </div>

        <div class="navigation-buttons">
            <button class="nav-button" id="prevButton" disabled>Previous</button>
            <button class="nav-button" id="nextButton" disabled>Next</button>
        </div>
    </main>

    <script>
        // Question data
        const questions = [
            {
                id: 1,
                type: 'fillInBlank',
                question: "Complete the sentence: 'She _____ to school every day.' (Use the verb 'go')",
                correctAnswer: "goes",
                explanation: "For third person singular (she), we add -es to verbs ending in 'o'."
            },
            {
                id: 2,
                type: 'multipleChoice',
                question: "Choose the correct form: 'They _____ breakfast at 8 AM.'",
                options: [
                    "eats",
                    "eat",
                    "eating",
                    "to eat"
                ],
                correctAnswer: 1,
                explanation: "For plural subjects like 'They', we use the base form of the verb without any ending: 'eat'."
            },
            {
                id: 3,
                type: 'trueFalse',
                question: "The sentence 'He play football every weekend.' is grammatically correct.",
                correctAnswer: false,
                explanation: "This is incorrect. For third person singular (he), we need to add -s: 'He plays football every weekend.'"
            },
            {
                id: 4,
                type: 'fillInBlank',
                question: "Complete the sentence: 'John _____ TV in the evening.' (Use the verb 'watch')",
                correctAnswer: "watches",
                explanation: "For third person singular (John), we add -es to verbs ending in 'ch'."
            },
            {
                id: 5,
                type: 'multipleChoice',
                question: "Choose the correct form: 'I _____ coffee every morning.'",
                options: [
                    "drinks",
                    "drinking",
                    "drink",
                    "am drink"
                ],
                correctAnswer: 2,
                explanation: "For first person singular (I), we use the base form of the verb: 'drink'."
            },
            {
                id: 6,
                type: 'transformation',
                question: "Transform this sentence to third person singular: 'I study English.'",
                correctAnswer: "He studies English.",
                explanation: "For third person singular, we change 'study' to 'studies' (y â†’ ies) and 'I' to 'He' or 'She'."
            },
            {
                id: 7,
                type: 'fillInBlank',
                question: "Complete the sentence: 'The class _____ at 9 AM.' (Use the verb 'start')",
                correctAnswer: "starts",
                explanation: "For third person singular (the class), we add -s to the base form of the verb."
            },
            {
                id: 8,
                type: 'multipleChoice',
                question: "Choose the correct form: 'We _____ in a small apartment.'",
                options: [
                    "lives",
                    "live",
                    "living",
                    "are live"
                ],
                correctAnswer: 1,
                explanation: "For first person plural (We), we use the base form of the verb: 'live'."
            },
            {
                id: 9,
                type: 'trueFalse',
                question: "The sentence 'She work in a hospital.' is grammatically correct.",
                correctAnswer: false,
                explanation: "This is incorrect. For third person singular (she), we need to add -s: 'She works in a hospital.'"
            },
            {
                id: 10,
                type: 'fillInBlank',
                question: "Complete the sentence: 'My friend _____ basketball on Fridays.' (Use the verb 'play')",
                correctAnswer: "plays",
                explanation: "For third person singular (my friend), we add -s to the base form of the verb."
            },
            {
                id: 11,
                type: 'multipleChoice',
                question: "Choose the correct form: 'The baby _____ a lot at night.'",
                options: [
                    "cry",
                    "crys",
                    "cries",
                    "crying"
                ],
                correctAnswer: 2,
                explanation: "For third person singular with a verb ending in consonant + y (the baby), we change y to i and add -es: 'cries'."
            },
            {
                id: 12,
                type: 'transformation',
                question: "Transform this sentence to first person plural: 'She goes to the gym.'",
                correctAnswer: "We go to the gym.",
                explanation: "For first person plural (We), we use the base form of the verb without any ending: 'go'."
            },
            {
                id: 13,
                type: 'fillInBlank',
                question: "Complete the sentence: 'My mother _____ dinner every evening.' (Use the verb 'cook')",
                correctAnswer: "cooks",
                explanation: "For third person singular (my mother), we add -s to the base form of the verb."
            },
            {
                id: 14,
                type: 'multipleChoice',
                question: "Choose the correct form: 'You _____ English very well.'",
                options: [
                    "speaks",
                    "speak",
                    "speaking",
                    "is speak"
                ],
                correctAnswer: 1,
                explanation: "For second person (you), we use the base form of the verb: 'speak'."
            },
            {
                id: 15,
                type: 'trueFalse',
                question: "The sentence 'They lives in New York.' is grammatically correct.",
                correctAnswer: false,
                explanation: "This is incorrect. For plural subjects (they), we do not add -s: 'They live in New York.'"
            },
            {
                id: 16,
                type: 'fillInBlank',
                question: "Complete the sentence: 'The teacher _____ the homework every Monday.' (Use the verb 'check')",
                correctAnswer: "checks",
                explanation: "For third person singular (the teacher), we add -s to the base form of the verb."
            },
            {
                id: 17,
                type: 'multipleChoice',
                question: "Choose the correct form: 'My parents _____ me every weekend.'",
                options: [
                    "visits",
                    "visit",
                    "visiting",
                    "are visit"
                ],
                correctAnswer: 1,
                explanation: "For plural subjects (my parents), we use the base form of the verb: 'visit'."
            },
            {
                id: 18,
                type: 'transformation',
                question: "Transform this sentence to third person singular: 'We wash the dishes after dinner.'",
                correctAnswer: "She washes the dishes after dinner.",
                explanation: "For third person singular, we add -es to verbs ending in 'sh' and change 'We' to 'He' or 'She'."
            },
            {
                id: 19,
                type: 'fillInBlank',
                question: "Complete the sentence: 'Tom _____ soccer on Saturdays.' (Use the verb 'play')",
                correctAnswer: "plays",
                explanation: "For third person singular (Tom), we add -s to the base form of the verb."
            },
            {
                id: 20,
                type: 'multipleChoice',
                question: "Choose the correct form: 'The dog _____ in the garden.'",
                options: [
                    "sleeps",
                    "sleep",
                    "sleeping",
                    "is sleep"
                ],
                correctAnswer: 0,
                explanation: "For third person singular (the dog), we add -s to the base form of the verb: 'sleeps'."
            },
            {
                id: 21,
                type: 'trueFalse',
                question: "The sentence 'I watches TV every night.' is grammatically correct.",
                correctAnswer: false,
                explanation: "This is incorrect. For first person singular (I), we do not add -es: 'I watch TV every night.'"
            },
            {
                id: 22,
                type: 'fillInBlank',
                question: "Complete the sentence: 'The sun _____ in the east.' (Use the verb 'rise')",
                correctAnswer: "rises",
                explanation: "For third person singular (the sun), we add -s to the base form of the verb."
            },
            {
                id: 23,
                type: 'multipleChoice',
                question: "Choose the correct form: 'My sister _____ in a bank.'",
                options: [
                    "work",
                    "works",
                    "working",
                    "is work"
                ],
                correctAnswer: 1,
                explanation: "For third person singular (my sister), we add -s to the base form of the verb: 'works'."
            },
            {
                id: 24,
                type: 'transformation',
                question: "Transform this sentence to second person singular: 'They read books every day.'",
                correctAnswer: "You read books every day.",
                explanation: "For second person singular (you), we use the base form of the verb without any ending: 'read'."
            },
            {
                id: 25,
                type: 'fillInBlank',
                question: "Complete the sentence: 'The train _____ at 6 PM.' (Use the verb 'leave')",
                correctAnswer: "leaves",
                explanation: "For third person singular (the train), we add -s to the base form of the verb."
            }
        ];

        // Initialize variables
        let currentQuestionIndex = 0;
        let streak = 0;
        let answeredQuestions = new Array(questions.length).fill(false);

        // DOM elements
        const questionsContainer = document.getElementById('questionsContainer');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const currentQuestionElement = document.getElementById('currentQuestion');
        const totalQuestionsElement = document.getElementById('totalQuestions');
        const currentStreakElement = document.getElementById('currentStreak');
        const progressFill = document.getElementById('progressFill');

        // Set total questions
        totalQuestionsElement.textContent = questions.length;

        // Create question elements
        function createQuestionElements() {
            questions.forEach((question, index) => {
                const questionElement = document.createElement('div');
                questionElement.classList.add('question-container');
                questionElement.id = `question-${index}`;
                
                let questionHTML = `<h3>Question ${index + 1}</h3><p>${question.question}</p>`;
                
                if (question.type === 'multipleChoice') {
                    questionHTML += `<div class="answer-options">`;
                    question.options.forEach((option, optIndex) => {
                        questionHTML += `
                            <div class="answer-option" data-index="${optIndex}">
                                ${option}
                            </div>
                        `;
                    });
                    questionHTML += `</div>`;
                } else if (question.type === 'fillInBlank') {
                    questionHTML += `<input type="text" class="answer-input" placeholder="Type your answer">`;
                } else if (question.type === 'trueFalse') {
                    questionHTML += `
                        <div class="answer-options">
                            <div class="answer-option" data-index="true">True</div>
                            <div class="answer-option" data-index="false">False</div>
                        </div>
                    `;
                } else if (question.type === 'transformation') {
                    questionHTML += `<input type="text" class="answer-input" placeholder="Type your answer">`;
                }
                
                questionHTML += `
                    <button class="check-answer-btn">Check Answer</button>
                    <div class="answer-result"></div>
                `;
                
                questionElement.innerHTML = questionHTML;
                questionsContainer.appendChild(questionElement);
                
                // Add event listeners
                if (question.type === 'multipleChoice' || question.type === 'trueFalse') {
                    const options = questionElement.querySelectorAll('.answer-option');
                    options.forEach(option => {
                        option.addEventListener('click', () => {
                            options.forEach(opt => opt.classList.remove('selected'));
                            option.classList.add('selected');
                        });
                    });
                }
                
                const checkButton = questionElement.querySelector('.check-answer-btn');
                checkButton.addEventListener('click', () => checkAnswer(index));
            });
            
            // Show first question
            showQuestion(0);
        }

        // Show a specific question
        function showQuestion(index) {
            // Hide all questions
            document.querySelectorAll('.question-container').forEach(el => {
                el.classList.remove('active');
            });
            
            // Show current question
            const currentQuestion = document.getElementById(`question-${index}`);
            currentQuestion.classList.add('active');
            
            // Update current question number
            currentQuestionIndex = index;
            currentQuestionElement.textContent = index + 1;
            
            // Update navigation buttons
            prevButton.disabled = index === 0;
            nextButton.disabled = index === questions.length - 1 || !answeredQuestions[index];
            
            // Update progress bar
            updateProgress();
        }

        // Check answer
        function checkAnswer(index) {
            const question = questions[index];
            const questionElement = document.getElementById(`question-${index}`);
            const resultElement = questionElement.querySelector('.answer-result');
            
            let userAnswer;
            let isCorrect = false;
            
            if (question.type === 'multipleChoice' || question.type === 'trueFalse') {
                const selectedOption = questionElement.querySelector('.answer-option.selected');
                if (!selectedOption) {
                    resultElement.textContent = "Please select an answer.";
                    resultElement.className = "answer-result incorrect";
                    return;
                }
                
                userAnswer = selectedOption.getAttribute('data-index');
                if (question.type === 'trueFalse') {
                    isCorrect = (userAnswer === "true") === question.correctAnswer;
                } else {
                    isCorrect = parseInt(userAnswer) === question.correctAnswer;
                }
            } else {
                const inputElement = questionElement.querySelector('.answer-input');
                userAnswer = inputElement.value.trim().toLowerCase();
                const correctAnswer = question.correctAnswer.toLowerCase();
                
                // For transformation questions, we'll be more lenient
                if (question.type === 'transformation') {
                    // Check if the key parts of the answer are included
                    const keyParts = correctAnswer.split(' ');
                    const essentialWords = keyParts.filter(word => word.length > 3);
                    const matchCount = essentialWords.filter(word => 
                        userAnswer.includes(word.toLowerCase())
                    ).length;
                    
                    isCorrect = matchCount >= Math.ceil(essentialWords.length * 0.7);
                } else {
                    // For fill in the blank, need exact match
                    isCorrect = userAnswer === correctAnswer;
                }
            }
            
            // Update UI based on result
            questionElement.classList.remove('correct', 'incorrect');
            questionElement.classList.add(isCorrect ? 'correct' : 'incorrect');
            
            resultElement.textContent = isCorrect ? 
                `Correct! ${question.explanation}` : 
                `Incorrect. The correct answer is: ${question.correctAnswer}. ${question.explanation}`;
            resultElement.className = `answer-result ${isCorrect ? 'correct' : 'incorrect'}`;
            
            // Update streak
            if (isCorrect) {
                streak++;
                if (!answeredQuestions[index]) {
                    answeredQuestions[index] = true;
                }
            } else {
                streak = 0;
            }
            currentStreakElement.textContent = streak;
            
            // Enable next button if answer is correct
            nextButton.disabled = index === questions.length - 1 || !answeredQuestions[index];
            
            // Update progress
            updateProgress();
        }

        // Update progress bar
        function updateProgress() {
            const progress = (answeredQuestions.filter(Boolean).length / questions.length) * 100;
            progressFill.style.width = `${progress}%`;
        }

        // Navigation event listeners
        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                showQuestion(currentQuestionIndex - 1);
            }
        });

        nextButton.addEventListener('click', () => {
            if (currentQuestionIndex < questions.length - 1 && answeredQuestions[currentQuestionIndex]) {
                showQuestion(currentQuestionIndex + 1);
            }
        });

        // Initialize the page
        createQuestionElements();
    </script>
</body>
</html>
